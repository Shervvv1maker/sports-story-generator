/* =============================================
   SPORTS STORY GENERATOR — STYLES
   TikTok / Reels short-form video format
   ─────────────────────────────────────────────
   Layout mirrors the viral "game background +
   narration + captions" format seen on TikTok.
   ============================================= */

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --accent:       #FF6B35;
  --caption-bg:   rgba(0, 0, 0, 0.78);
  --radius:       14px;
  --hud-font:     'Arial Black', Arial, sans-serif;
  --cap-font:     'Arial Black', 'Segoe UI Black', Impact, sans-serif;
}

html, body {
  width: 100%; height: 100%;
  overflow: hidden;
  background: #000;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
}

/* ── App shell (portrait phone 9:16) ── */
#app {
  position: relative;
  width:  100vw;
  height: 100vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  background: #000;
}

/* ── Canvas (fills entire bg) ── */
#bgCanvas {
  position: absolute;
  inset: 0;
  width: 100%; height: 100%;
  z-index: 0;
  cursor: pointer;
  touch-action: none;
}

/* ── Gradient vignette — keeps text readable over any bg ── */
#vignette {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  background:
    linear-gradient(
      to bottom,
      rgba(0,0,0,0.60) 0%,        /* top — sport bar */
      rgba(0,0,0,0.05) 22%,
      rgba(0,0,0,0.00) 45%,
      rgba(0,0,0,0.25) 60%,
      rgba(0,0,0,0.82) 80%,
      rgba(0,0,0,0.97) 100%
    );
}

/* ─────────────────────────────────────
   TOP SPORT SELECTOR
──────────────────────────────────── */
#sportBar {
  position: absolute;
  top: 12px; left: 0; right: 0;
  z-index: 10;
  display: flex;
  gap: 7px;
  padding: 0 12px;
  overflow-x: auto;
  scrollbar-width: none;
}
#sportBar::-webkit-scrollbar { display: none; }

.sportBtn {
  flex-shrink: 0;
  background: rgba(255,255,255,0.13);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1.5px solid rgba(255,255,255,0.22);
  border-radius: 20px;
  color: #fff;
  font-size: 11px;
  font-weight: 800;
  padding: 5px 12px;
  cursor: pointer;
  white-space: nowrap;
  transition: background .18s, border-color .18s, transform .12s, box-shadow .18s;
  letter-spacing: .4px;
}
.sportBtn:hover {
  background: rgba(255,255,255,0.24);
  transform: scale(1.06);
}
.sportBtn.active {
  background: var(--accent);
  border-color: var(--accent);
  box-shadow: 0 0 14px var(--accent), 0 0 30px rgba(255,107,53,.35);
}

/* ─────────────────────────────────────
   VIDEO OVERLAY  (stacked bottom-up)
──────────────────────────────────── */
#videoOverlay {
  position: absolute;
  inset: 0;
  z-index: 5;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding: 0 14px 16px;
  pointer-events: none;
}

/* Sport badge */
#sportBadge {
  position: absolute;
  top: 58px; left: 14px;
  display: flex;
  align-items: center;
  gap: 5px;
  background: var(--accent);
  border-radius: 20px;
  padding: 4px 11px 4px 8px;
  font-size: 11px;
  font-weight: 900;
  color: #fff;
  letter-spacing: .6px;
  text-transform: uppercase;
  pointer-events: none;
  box-shadow: 0 2px 12px rgba(0,0,0,0.5);
  transition: background .4s, box-shadow .4s;
}
#badgeYear { opacity: .72; font-weight: 600; }

/* Source chip */
#sourceChip {
  position: absolute;
  top: 58px; right: 14px;
  background: rgba(0,0,0,0.55);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,.18);
  border-radius: 20px;
  padding: 4px 10px;
  font-size: 10px;
  color: rgba(255,255,255,.8);
  pointer-events: none;
  letter-spacing: .2px;
}

/* Story title */
#titleCard { margin-bottom: 10px; }
#storyTitle {
  font-size: clamp(15px, 4.2vw, 20px);
  font-weight: 900;
  color: #fff;
  line-height: 1.25;
  text-shadow:
    0 0 4px rgba(0,0,0,1),
    0 2px 12px rgba(0,0,0,0.95),
    0 0 30px rgba(0,0,0,0.8);
  letter-spacing: -.2px;
}

/* ─────────────────────────────────────
   CAPTIONS  — TikTok-style
   Large bold centered text, word highlight
──────────────────────────────────── */
#captionBar {
  min-height: 72px;
  background: var(--caption-bg);
  border-radius: var(--radius);
  padding: 10px 14px;
  margin-bottom: 10px;
  border: 1px solid rgba(255,255,255,0.08);
}

#captionText {
  font-family: var(--cap-font);
  font-size: clamp(15px, 4.5vw, 20px);
  font-weight: 900;
  color: #fff;
  line-height: 1.5;
  letter-spacing: .15px;
  /* TikTok-style text outline */
  -webkit-text-stroke: .5px rgba(0,0,0,0.6);
  text-shadow:
    -1px -1px 0 #000,
     1px -1px 0 #000,
    -1px  1px 0 #000,
     1px  1px 0 #000,
    0 2px 8px rgba(0,0,0,0.7);
}

/* Active (currently spoken) word */
#captionText .cw-active {
  color: #FFE500;
  -webkit-text-stroke: .5px rgba(0,0,0,.5);
  text-shadow:
    -1px -1px 0 rgba(0,0,0,.6),
     1px -1px 0 rgba(0,0,0,.6),
    -1px  1px 0 rgba(0,0,0,.6),
     1px  1px 0 rgba(0,0,0,.6),
    0 0 14px rgba(255,229,0,.6);
}

/* ─────────────────────────────────────
   PROGRESS BAR
──────────────────────────────────── */
#progressWrap {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 10px;
}
#progressBar {
  flex: 1;
  height: 4px;
  background: rgba(255,255,255,.18);
  border-radius: 2px;
  overflow: hidden;
  position: relative;
}
#progressBar::after {
  content: '';
  position: absolute;
  left: 0; top: 0; bottom: 0;
  width: var(--progress, 0%);
  background: var(--accent);
  border-radius: 2px;
  transition: width .3s linear;
  box-shadow: 0 0 6px var(--accent);
}
#timeLabel {
  font-size: 10px;
  color: rgba(255,255,255,.65);
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
  font-weight: 700;
}

/* ─────────────────────────────────────
   CONTROLS
──────────────────────────────────── */
#controls {
  display: flex;
  align-items: center;
  gap: 8px;
  pointer-events: auto;
}

.ctaBtn {
  flex: 1;
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 26px;
  padding: 13px 20px;
  font-size: 14px;
  font-weight: 900;
  cursor: pointer;
  letter-spacing: .3px;
  transition: transform .14s, box-shadow .14s, opacity .2s;
  box-shadow: 0 4px 18px rgba(255,107,53,.5);
}
.ctaBtn:hover   { transform: scale(1.04); box-shadow: 0 6px 24px rgba(255,107,53,.65); }
.ctaBtn:active  { transform: scale(.96); }
.ctaBtn:disabled { opacity: .42; cursor: default; transform: none; }

.iconBtn {
  width: 42px; height: 42px;
  border-radius: 50%;
  background: rgba(255,255,255,.14);
  backdrop-filter: blur(6px);
  border: 1.5px solid rgba(255,255,255,.22);
  color: #fff;
  font-size: 16px;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: background .18s, transform .13s, opacity .2s;
}
.iconBtn:hover   { background: rgba(255,255,255,.26); transform: scale(1.1); }
.iconBtn:active  { transform: scale(.9); }
.iconBtn:disabled { opacity: .3; cursor: default; transform: none; }

/* ─────────────────────────────────────
   SCORE HUD  (top right)
──────────────────────────────────── */
#scoreHUD {
  position: absolute;
  top: 100px; right: 14px;
  z-index: 8;
  text-align: center;
  pointer-events: none;
}
#scoreLabel {
  font: 900 8px/1 var(--hud-font);
  letter-spacing: 2.5px;
  color: rgba(255,255,255,.45);
  text-transform: uppercase;
}
#scoreValue {
  font: 900 24px/1.1 var(--hud-font);
  color: #FFE500;
  text-shadow: 0 0 14px rgba(255,229,0,.65);
}

/* ─────────────────────────────────────
   LOADING OVERLAY
──────────────────────────────────── */
#loadingScreen {
  position: absolute;
  inset: 0;
  z-index: 20;
  background: rgba(0,0,0,.80);
  backdrop-filter: blur(10px);
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 18px;
  color: #fff;
  font-size: 14px;
  font-weight: 700;
  letter-spacing: .4px;
}
#loadingScreen.visible { display: flex; }

.spinner {
  width: 48px; height: 48px;
  border: 4px solid rgba(255,255,255,.18);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin .7s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ─────────────────────────────────────
   SCORE POP-UP  (DOM element injected on catch)
──────────────────────────────────── */
.scorePop {
  position: fixed;
  z-index: 30;
  font: 900 20px var(--hud-font);
  color: #FFE500;
  text-shadow: 0 2px 8px rgba(0,0,0,.7);
  pointer-events: none;
  animation: popUp .95s ease-out forwards;
  transform-origin: center bottom;
}
@keyframes popUp {
  0%   { opacity: 1; transform: translateY(0)    scale(1.25); }
  60%  { opacity: .8; }
  100% { opacity: 0; transform: translateY(-60px) scale(.85); }
}

/* ─────────────────────────────────────
   SPORT ACCENT COLORS  (CSS vars per sport)
──────────────────────────────────── */
body[data-sport="football"]   { --accent: #8B5E3C; }
body[data-sport="basketball"] { --accent: #FF6B00; }
body[data-sport="baseball"]   { --accent: #D22730; }
body[data-sport="soccer"]     { --accent: #00A36C; }
body[data-sport="golf"]       { --accent: #2E8B57; }
body[data-sport="f1"]         { --accent: #E8002D; }

/* ─────────────────────────────────────
   DESKTOP: centre at phone width
──────────────────────────────────── */
@media (min-width: 520px) {
  body {
    background: #0a0a0a;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
  }
  #app {
    width:  390px;
    height: 844px;
    border-radius: 36px;
    overflow: hidden;
    box-shadow: 0 0 80px rgba(0,0,0,.9), 0 0 200px rgba(0,0,0,.6);
  }
}

/* ─────────────────────────────────────
   KEYBOARD HINT  (injected by game.js)
──────────────────────────────────── */
/* Inherits position:absolute from inline style */
